<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="icon" type="image/png" href="assetsmain/images/icon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Aquapedia</title>
    
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    <link href="assets/css/my.css" rel="stylesheet" />
    <!-- Bootstrap core CSS     -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="assets/css/animate.min.css" rel="stylesheet"/>

    <!--  Light Bootstrap Table core CSS    -->
    <link href="assets/css/light-bootstrap-dashboard.css" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="assets/css/demo.css" rel="stylesheet" />


    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />

	<!-- Extra Links 3n el tte-->
    <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" media="all" href="./jquery.progressbar.css" />
    <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">


</head>
<body>

<div class="wrapper">
    <div class="sidebar" data-color="azure" data-image="assets/img/sidebar-5.jpg">

    <!--

        Tip 1: you can change the color of the sidebar using: data-color="blue | azure | green | orange | red | purple"
        Tip 2: you can also add an image using data-image tag

    -->
    	<div class="sidebar-wrapper">
            <div class="logo">
                <a href="http://www.creative-tim.com" class="simple-text">
                    Aquapedia
                </a>
            </div>

            <ul class="nav">
                <li class="active">
                    <a href="dashboard.html">
                        <i class="pe-7s-graph"></i>
                        <p>Dashboard</p>
                    </a>
                </li>
                <li>
                    <a href="user.html">
                        <i class="pe-7s-user"></i>
                        <p>User Profile</p>
                    </a>
                </li>
            </ul>
    	</div>
    </div>

    <div class="main-panel">
        <nav class="navbar navbar-default navbar-fixed">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Dashboard</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-left">
                        <li>
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-dashboard"></i>
								<p class="hidden-lg hidden-md">Dashboard</p>
                            </a>
                        </li>
                        </a>
                        </li>
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href = "index.html">
                                <p>Log out</p>
                            </a>
                        </li>
						<li class="separator hidden-lg hidden-md"></li>
                    </ul>
                </div>
            </div>
        </nav>


        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="header">
                                <h4 class="title ">LATEST BILL</h4>
                                <p id = "getbilldate" class="category">May 2017</p> 
                                <h3 class="pe-7s-cash" id = "Bill"> 250 L.E.</h3>

                            </div>
                            <hr>

                            <div class="header">
                                <h4 class="title">What will my bill be?</h4>
                                <p class="category">For next month</p> 
                                <h3 id="expectedbill" class="pe-7s-cash"> xx L.E.</h3>  
                                <p class="category">You currently use</p> <hr>

                                 <div id="bar2" class="barfiller">
                                     <div class="tipWrap">
                                         <span class="tip"></span>
                                     </div>

                                     <span id = "bar" class="fill"  data-percentage= "" ></span>
                                 </div> 
                                 <div class="stats" left>
                                    <i class="fa fa-history"></i>
                                    <p id ="lastUpdate1" ></p>
                                </div>
                            </div>

                           
                            <hr>

                            <div class="header">
                                <h4 class="title">My current tier</h4>
                                <p id = "tier" class="category">xx L</p>
                                <div id="steps"></div>   
                            </div>
                            <br>

                            <!-- -->

                        </div>

                    </div>



                    <div class="col-md-8">
                        <div class="card">
                            <div class="header">
                                <h4 class="title">Last Year Neighbors Comparison</h4>
                            </div>
                            <div class="content">
                                <canvas id="ComparisonChart" height="115"></canvas>
                                <div class="footer">
                                    <hr>
                                    <div class="stats">
                                    <i class="fa fa-history"></i>
                                    <p id ="lastUpdate2" ></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="header">
                            <h4 class="title"> Your Actual Usage Vs. Expected Usage</h4>
                            <p class="category">Daily</p> 
                            <canvas id="myChart"  height="70"></canvas>
                            <div class="footer">
                                    <hr>
                                    <div class="stats">
                                        <i class="fa fa-history"></i>
                                        <p id ="lastUpdate3" ></p>
                                    </div>
                            </div>
                            </div>


                        </div>
                     </div>

            </div>



                <div class="row">

                    <div class="col-md-4">


                        <div class="card ">
                            <div class="header">
                                <h4 class="pe-7s-speaker"> Alerts </h4>
                            </div>
                            <div class="content">
                            <h5>How you are doing:</h5>
                            <hr>
                            <p id = "msg" class ="category"> </p><br>
                            <h5 >Tier Updates</h5>
                            <hr>
                            <p id = "tierupdates" class ="category"> </p>
                            <h5 >Pipes</h5>
                            <hr>
                            <p id = "pipes" class ="category"> </p>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-8">
                        <div class="card ">
                            <div class="header">
                                <h4 class="title">History</h4>
                            </div>
                            <div class="content">
                            <li class="dropdown nav navbar-nav navbar-left">
                                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                        <p id="showyear">
                                            Choose Year
                                            <b class="caret"></b>
                                        </p>
                                  </a>
                                  <ul id="ChooseYear" class="dropdown-menu">
                                    <li><a >2016</a></li>
  
                                  </ul>
                             </li>

                             <canvas id="HistoryChart"></canvas>
                            <div class="footer">
                                <hr>
                                <div class="stats">
                                    <i class="fa fa-history"></i>
                                    <p id ="lastUpdate4" ></p>
                                </div>
                            </div>

                        </div>
                    </div>


                </div>
            </div>
        </div>

    </div>
</div>


</body>


    <!--   Core JS Files   -->
    <script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="assets/js/bootstrap.min.js" type="text/javascript"></script>


    <!--  Checkbox, Radio & Switch Plugins -->
    <script src="assets/js/bootstrap-checkbox-radio-switch.js"></script>

    <!--  Charts Plugin -->
    <script src="assets/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="assets/js/bootstrap-notify.js"></script>

    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
    <script src="assets/js/light-bootstrap-dashboard.js"></script>

    <!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
    <script src="assets/js/demo.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js" />

    <script src="http://code.jquery.com/jquery-3.1.0.slim.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="./jquery.progressbar.js"></script>

	<script type="text/javascript">
    	$(document).ready(function(){

        	demo.initChartist();

        	$.notify({
            	icon: 'pe-7s-gift',
            	message: "Welcome to <b>Aquapedia</b> - a beautiful service designed just for <b>YOU</b>."

            },{
                type: 'info',
                timer: 4000
            });

    	});
	</script>

    <script src="js/jquery.barfiller.js" type="text/javascript"></script>
    <script type="text/javascript">

    $(document).ready(function(){

        $('#bar1').barfiller();
        $('#bar2').barfiller();
        $('#bar3').barfiller({ barColor: '#fc6' });
        $('#bar4').barfiller({ barColor: '#900', duration: 3000 });
        
    });

    </script>

      <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-36251023-1']);
      _gaq.push(['_setDomainName', 'jqueryscript.net']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

    <script>
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", "http://127.0.0.1:8000/ActualVsExpected/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        var array = JSON.parse(response.test);

        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'horizontalBar',

            // The data for our dataset
            data: {
                labels: ["Expected Use", "Actual Use"],
                datasets: [{
                    label: "Your Usage in gallons",
                    backgroundColor: '#4AD2EE',
                    borderColor: '#4AD2EE',
                    data: [array[0], array[1]],
                }]
            },

            // Configuration options go here
            options: {
                scales: {
                    xAxes: [{
                        ticks: {
                            min: 0 // Edit the value according to what you need
                        }
                    }],
                    yAxes: [{
                        stacked: true
                    }]
                }
            }
        });
    </script>

    <script type="text/javascript">

        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", "http://127.0.0.1:8000/comparison/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        var array = JSON.parse('['+response.test+']');
        
        var ctx = document.getElementById('ComparisonChart').getContext('2d');
        var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: ["January", "February", "March", "April", "May", "June", "July", "August" , "September" , "October" , "November" , "December"],
            datasets: [{
                label: "You",
                fill: false,
                backgroundColor: '#ffffff',
                borderColor: '#4AD2EE',
                data: [array[0][0], array[0][1], array[0][2], array[0][3],
                   array[0][4], array[0][5], array[0][6], array[0][7],
                   array[0][8], array[0][9], array[0][10], array[0][11]],
            }, {
                label: "Efficient neighbor",
                fill: false,
                backgroundColor: '#ffffff',
                borderColor: '#F7973F',
                data: [array[2][0], array[2][1], array[2][2], array[2][3],
                   array[2][4], array[2][5], array[2][6], array[2][7],
                   array[2][8], array[2][9], array[2][10], array[2][11]],

            }, {
                label: "Your neighbors",
                fill: false,
                backgroundColor: '#ffffff',
                borderColor: '#D85D6C',
                data: [array[1][0], array[1][1], array[1][2], array[1][3],
                   array[1][4], array[1][5], array[1][6], array[1][7],
                   array[1][8], array[1][9], array[1][10], array[1][11]],

            }]
        },


        // Configuration options go here
        options: {}
        }); 
    </script>

    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", "http://127.0.0.1:8000/history/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        var array = JSON.parse(response.test);
        var ctx = document.getElementById('HistoryChart').getContext('2d');
        var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'bar',

        // The data for our dataset
        data: {
            labels: ["January", "February", "March", "April", "May", "June", "July" , "August" , "September" , "October" , "November" , "December"],
            datasets: [{
                label: "Your Use in L.E.",
                fill: false,
                backgroundColor: '#D85D6C',
                borderColor: '#D85D6C',
                data: [array[0], array[1], array[2], array[3],
                       array[4], array[5], array[6], array[7],
                       array[8], array[9], array[10], array[11]],
            }, ]
        },


        // Configuration options go here
        options: {}
        }); 
    </script>

    
    <script type="text/javascript">
    var arr;
    var xmlHttp = new XMLHttpRequest();

    xmlHttp.open( "GET", "http://127.0.0.1:8000/tier/?94", false); // false for synchronous request
    xmlHttp.send();
    console.log(xmlHttp.responseText);
    var response = JSON.parse(xmlHttp.responseText);


    if (response.tier == 1){
        arr = ['@0.30 L.E.', '0.70 L.E.', '1.05 L.E.', '1.55 L.E.' , '~1.80 L.E.',]
        document.getElementById('tier').innerHTML = "First tier";
    } 
    if (response.tier == '2'){
        arr = ['0.30 L.E.', '@0.70 L.E.', '1.05 L.E.', '1.55 L.E.' , '~1.80 L.E.',]
        document.getElementById('tier').innerHTML = "Second tier";
    } 
    if (response.tier == '3'){
        arr = ['0.30 L.E.', '0.70 L.E.', '@1.05 L.E.', '1.55 L.E.' , '~1.80 L.E.',]
        document.getElementById('tier').innerHTML = "Third tier";
    } 
    if (response.tier == '4'){
        arr = ['0.30 L.E.', '0.70 L.E.', '1.05 L.E.', '@1.55 L.E.' , '~1.80 L.E.',]
        document.getElementById('tier').innerHTML = "Forth tier";
    } 

    jQuery(document).ready(function($) {
      $('#steps').progressbar({

        steps : [arr[0], arr[1], arr[2], arr[3], arr[4]]
      });
    });
    </script>

    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/bill/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);

        document.getElementById('Bill').innerHTML = " "+response.test+ " L.E.";
        
    </script>
    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/getdate/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        document.getElementById('getbilldate').innerHTML = " "+response.test;

        
    </script>
    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/expectedbill/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        document.getElementById('expectedbill').innerHTML = " "+response.test+ " L.E.";
        
    </script>

    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/tierupdates/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        document.getElementById('tierupdates').innerHTML = response.test;


        var xhr = new XMLHttpRequest();
        xhr.open("GET", "http://127.0.0.1:8000/tierupdates/?94", true);
        xhr.onload = function (e) {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              console.log(xhr.responseText);
            } else {
              console.error(xhr.statusText);
            }
          }
        };
        xhr.onerror = function (e) {
          console.error(xhr.statusText);
        };
        xhr.send(null);
        
    </script>

    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/msg/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        document.getElementById('msg').innerHTML = response.test;
        
    </script>

    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/leakage/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        document.getElementById('pipes').innerHTML = response.test;
        
    </script>

    <script type="text/javascript">
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open( "GET", "http://127.0.0.1:8000/lastUpdate/?94", false); // false for synchronous request
        xmlHttp.send();
        console.log(xmlHttp.responseText);
        var response = JSON.parse(xmlHttp.responseText);
        document.getElementById('lastUpdate1').innerHTML = response.test;
        document.getElementById('lastUpdate2').innerHTML = response.test;
        document.getElementById('lastUpdate3').innerHTML = response.test;
        document.getElementById('lastUpdate4').innerHTML = response.test;
        
    </script>
    <script type="text/javascript">

        $('#ChooseYear li').on('click', function(){
            var year=$(this).text();
    $('#showyear').text(year);
    });
    </script>

</html>
